; (function () {

  const yawf = window.yawf;
  const util = yawf.util = yawf.util ?? {};

  const strings = util.strings = {};

  /**
   * 将微博中带有“万”或“亿”的字串转换为数字
   * 微博的“万”“亿”没有针对不同语言做处理，繁体字和英文用户也会看到这两个字
   * @param {string} str
   * @returns {number}
   */
  strings.parseint = str => {
    return Number(str.replace('万', 'e4').replace('亿', 'e8'));
  };

  /**
   * 生成一个随机字符串
   * @returns {string}
   */
  strings.randKey = () => {
    const rand = new Uint8Array(64);
    crypto.getRandomValues(rand);
    return [...rand].map(value => value.toString(16).padStart(2, 0)).join('');
  };

  /**
   * 同形汉字替换表，键为不常用汉字，值为常用汉字
   * 基于 https://www.unicode.org/Public/security/15.0.0/confusables.txt
   * 因为有太多莫名其妙的字符，所以这里用位点以免出现问题
   */
  const confusableHanTable = { 11906: 20059, 11907: 20058, 11909: 20155, 11913: 20994, 11915: 13630, 11918: 20800, 11919: 23587, 11920: 23586, 11922: 24051, 11923: 24186, 11924: 24401, 11926: 24516, 11927: 14586, 11928: 25164, 11929: 25909, 11931: 26081, 11934: 27514, 11935: 27597, 11936: 27665, 11937: 27701, 11938: 27706, 11939: 28780, 11940: 29227, 11942: 20012, 11944: 29357, 11947: 32594, 11949: 31035, 11951: 31993, 11953: 32595, 11954: 32594, 11961: 32770, 11962: 32896, 11966: 33401, 11967: 33401, 11968: 33401, 11969: 34382, 11970: 34916, 11971: 35200, 11972: 35199, 11973: 35265, 11976: 35744, 11977: 36125, 11979: 36710, 11980: 36790, 11981: 36790, 11983: 38429, 11984: 38021, 11985: 38263, 11986: 38264, 11987: 38271, 11988: 38376, 11990: 38429, 11992: 38738, 11993: 38886, 11994: 39029, 11995: 39118, 11996: 39134, 11997: 39135, 11999: 39136, 12000: 39267, 12002: 39532, 12004: 39740, 12005: 40060, 12008: 40614, 12009: 40644, 12011: 25993, 12012: 40784, 12013: 27503, 12014: 40831, 12015: 31452, 12016: 40857, 12018: 20096, 12019: 40863, 12036: 20057, 12037: 20101, 12038: 20108, 12039: 20128, 12040: 20154, 12041: 20799, 12042: 20837, 12043: 20843, 12044: 20866, 12045: 20886, 12046: 20907, 12047: 20960, 12048: 20981, 12049: 20992, 12050: 21147, 12051: 21241, 12052: 21269, 12053: 21274, 12054: 21304, 12055: 21313, 12056: 21340, 12057: 21353, 12058: 21378, 12059: 21430, 12060: 21448, 12061: 21475, 12062: 21475, 12063: 22303, 12064: 22303, 12065: 22786, 12066: 22794, 12067: 22805, 12068: 22823, 12069: 22899, 12070: 23376, 12071: 23424, 12072: 23544, 12073: 23567, 12074: 23586, 12075: 23608, 12076: 23662, 12077: 23665, 12078: 24027, 12079: 24037, 12080: 24049, 12081: 24062, 12082: 24178, 12083: 24186, 12084: 24191, 12085: 24308, 12086: 24318, 12087: 24331, 12088: 24339, 12089: 24400, 12090: 24417, 12091: 24435, 12092: 24515, 12093: 25096, 12094: 25142, 12095: 25163, 12096: 25903, 12097: 25908, 12098: 25991, 12099: 26007, 12100: 26020, 12101: 26041, 12102: 26080, 12103: 26085, 12104: 26352, 12105: 26376, 12106: 26408, 12107: 27424, 12108: 27490, 12109: 27513, 12110: 27571, 12111: 27595, 12112: 27604, 12113: 27611, 12114: 27663, 12115: 27668, 12116: 27700, 12117: 28779, 12118: 29226, 12119: 29238, 12120: 29243, 12121: 29247, 12122: 29255, 12123: 29273, 12124: 29275, 12125: 29356, 12126: 29572, 12127: 29577, 12128: 29916, 12129: 29926, 12130: 29976, 12131: 29983, 12132: 29992, 12133: 30000, 12134: 30091, 12135: 30098, 12136: 30326, 12137: 30333, 12138: 30382, 12139: 30399, 12140: 30446, 12141: 30683, 12142: 30690, 12143: 30707, 12144: 31034, 12145: 31160, 12146: 31166, 12147: 31348, 12148: 31435, 12149: 31481, 12150: 31859, 12151: 31992, 12152: 32566, 12153: 32593, 12154: 32650, 12155: 32701, 12156: 32769, 12157: 32780, 12158: 32786, 12159: 32819, 12160: 32895, 12161: 32905, 12162: 33251, 12163: 33258, 12164: 33267, 12165: 33276, 12166: 33292, 12167: 33307, 12168: 33311, 12169: 33390, 12170: 33394, 12171: 33400, 12172: 34381, 12173: 34411, 12174: 34880, 12175: 34892, 12176: 34915, 12177: 35198, 12178: 35211, 12179: 35282, 12180: 35328, 12181: 35895, 12182: 35910, 12183: 35925, 12184: 35960, 12185: 35997, 12186: 36196, 12187: 36208, 12188: 36275, 12189: 36523, 12190: 36554, 12191: 36763, 12192: 36784, 12193: 36789, 12194: 37009, 12195: 37193, 12196: 37318, 12197: 37324, 12198: 37329, 12199: 38263, 12200: 38272, 12201: 38428, 12202: 38582, 12203: 38585, 12204: 38632, 12205: 38737, 12206: 38750, 12207: 38754, 12208: 38761, 12209: 38859, 12210: 38893, 12211: 38899, 12212: 38913, 12213: 39080, 12214: 39131, 12215: 39135, 12216: 39318, 12217: 39321, 12218: 39340, 12219: 39592, 12220: 39640, 12221: 39647, 12222: 39717, 12223: 39727, 12224: 39730, 12225: 39740, 12226: 39770, 12227: 40165, 12228: 40565, 12229: 40575, 12230: 40613, 12231: 40635, 12232: 40643, 12233: 40653, 12234: 40657, 12235: 40697, 12236: 40701, 12237: 40718, 12238: 40723, 12239: 40736, 12240: 40763, 12241: 40778, 12242: 40786, 12243: 40845, 12244: 40860, 12245: 40864, 12344: 21313, 12345: 21316, 12346: 21317, 63744: 35912, 63745: 26356, 63746: 36554, 63747: 36040, 63748: 28369, 63749: 20018, 63750: 21477, 63751: 40860, 63752: 40860, 63753: 22865, 63754: 37329, 63755: 21895, 63756: 22856, 63757: 25078, 63758: 30313, 63759: 32645, 63760: 34367, 63761: 34746, 63762: 35064, 63763: 37007, 63764: 27138, 63765: 27931, 63766: 28889, 63767: 29662, 63768: 33853, 63769: 37226, 63770: 39409, 63771: 20098, 63772: 21365, 63773: 27396, 63774: 29211, 63775: 34349, 63776: 40478, 63777: 23888, 63778: 28651, 63779: 34253, 63780: 35172, 63781: 25289, 63782: 33240, 63783: 34847, 63784: 24266, 63785: 26391, 63786: 28010, 63787: 29436, 63788: 37070, 63789: 20358, 63790: 20919, 63791: 21214, 63792: 25796, 63793: 27347, 63794: 29200, 63795: 30439, 63796: 32769, 63797: 34310, 63798: 34396, 63799: 36335, 63800: 38706, 63801: 39791, 63802: 40442, 63803: 30860, 63804: 31103, 63805: 32160, 63806: 33737, 63807: 37636, 63808: 40575, 63809: 35542, 63810: 22751, 63811: 24324, 63812: 31840, 63813: 32894, 63814: 29282, 63815: 30922, 63816: 36034, 63817: 38647, 63818: 22744, 63819: 23650, 63820: 27155, 63821: 28122, 63822: 28431, 63823: 32047, 63824: 32311, 63825: 38475, 63826: 21202, 63827: 32907, 63828: 20956, 63829: 20940, 63830: 31260, 63831: 32190, 63832: 33777, 63833: 38517, 63834: 35712, 63835: 25295, 63836: 27138, 63837: 35582, 63838: 20025, 63839: 23527, 63840: 24594, 63841: 29575, 63842: 30064, 63843: 21271, 63844: 30971, 63845: 20415, 63846: 24489, 63847: 19981, 63848: 27852, 63849: 25976, 63850: 32034, 63851: 21443, 63852: 22622, 63853: 30465, 63854: 33865, 63855: 35498, 63856: 27578, 63857: 36784, 63858: 27784, 63859: 25342, 63860: 33509, 63861: 25504, 63862: 30053, 63863: 20142, 63864: 20841, 63865: 20937, 63866: 26753, 63867: 31975, 63868: 33391, 63869: 35538, 63870: 37327, 63871: 21237, 63872: 21570, 63873: 22899, 63874: 24300, 63875: 26053, 63876: 28670, 63877: 31018, 63878: 38317, 63879: 39530, 63880: 40599, 63881: 40654, 63882: 21147, 63883: 26310, 63884: 27511, 63885: 36706, 63886: 24180, 63887: 24976, 63888: 25088, 63889: 25754, 63890: 28451, 63891: 29001, 63892: 29833, 63893: 31178, 63894: 32244, 63895: 32879, 63896: 36646, 63897: 34030, 63898: 36899, 63899: 37706, 63900: 21015, 63901: 21155, 63902: 21693, 63903: 28872, 63904: 35010, 63905: 35498, 63906: 24265, 63907: 24565, 63908: 25467, 63909: 27566, 63910: 31806, 63911: 29557, 63912: 20196, 63913: 22265, 63914: 23527, 63915: 23994, 63916: 24604, 63917: 29618, 63918: 29801, 63919: 32666, 63920: 32838, 63921: 37428, 63922: 38646, 63923: 38728, 63924: 38936, 63925: 20363, 63926: 31150, 63927: 37300, 63928: 38583, 63929: 24801, 63930: 20102, 63931: 20698, 63932: 23534, 63933: 23615, 63934: 26009, 63935: 27138, 63936: 29134, 63937: 30274, 63938: 34044, 63939: 36988, 63940: 40845, 63941: 26248, 63942: 38446, 63943: 21129, 63944: 26491, 63945: 26611, 63946: 27969, 63947: 28316, 63948: 29705, 63949: 30041, 63950: 30827, 63951: 32016, 63952: 39006, 63953: 20845, 63954: 25134, 63955: 38520, 63956: 20523, 63957: 23833, 63958: 28138, 63959: 36650, 63960: 24459, 63961: 24900, 63962: 26647, 63963: 29575, 63964: 38534, 63965: 21033, 63966: 21519, 63967: 23653, 63968: 26131, 63969: 26446, 63970: 26792, 63971: 27877, 63972: 29702, 63973: 30178, 63974: 32633, 63975: 35023, 63976: 35041, 63977: 37324, 63978: 38626, 63979: 21311, 63980: 28346, 63981: 21533, 63982: 29136, 63983: 29848, 63984: 34298, 63985: 38563, 63986: 40023, 63987: 40607, 63988: 26519, 63989: 28107, 63990: 33256, 63991: 31435, 63992: 31520, 63993: 31890, 63994: 29376, 63995: 28825, 63996: 35672, 63997: 20160, 63998: 33590, 63999: 21050, 64000: 20999, 64001: 24230, 64002: 25299, 64003: 31958, 64004: 23429, 64005: 27934, 64006: 26292, 64007: 36667, 64008: 34892, 64009: 38477, 64010: 35211, 64011: 24275, 64012: 20800, 64013: 21952, 64016: 22618, 64018: 26228, 64021: 20958, 64022: 29482, 64023: 30410, 64024: 31036, 64025: 31070, 64026: 31077, 64027: 31119, 64028: 38742, 64029: 31934, 64030: 32701, 64032: 34322, 64034: 35576, 64037: 36920, 64038: 37117, 64042: 39151, 64043: 39164, 64044: 39208, 64045: 40372, 64046: 37070, 64047: 38583, 64048: 20398, 64049: 20711, 64050: 20813, 64051: 21193, 64052: 21220, 64053: 21329, 64054: 21917, 64055: 22022, 64056: 22120, 64057: 22592, 64058: 22696, 64059: 23652, 64060: 23662, 64061: 24724, 64062: 24936, 64063: 24974, 64064: 25074, 64065: 25935, 64066: 26082, 64067: 26257, 64068: 26757, 64069: 28023, 64070: 28186, 64071: 28450, 64072: 29038, 64073: 29227, 64074: 29730, 64075: 30865, 64076: 31038, 64077: 31049, 64078: 31048, 64079: 31056, 64080: 31062, 64081: 31069, 64082: 31117, 64083: 31118, 64084: 31296, 64085: 31361, 64086: 31680, 64087: 32244, 64088: 32265, 64089: 32321, 64090: 32626, 64091: 32773, 64092: 33261, 64093: 33401, 64094: 33401, 64095: 33879, 64096: 35088, 64097: 35222, 64098: 35585, 64099: 35641, 64100: 36051, 64101: 36104, 64102: 36790, 64103: 36920, 64104: 38627, 64105: 38911, 64106: 38971, 64107: 24693, 64108: 148206, 64109: 33304, 64112: 20006, 64113: 20917, 64114: 20840, 64115: 20352, 64116: 20805, 64117: 20864, 64118: 21191, 64119: 21242, 64120: 21917, 64121: 21845, 64122: 21913, 64123: 21986, 64124: 22618, 64125: 22707, 64126: 22852, 64127: 22868, 64128: 23138, 64129: 23336, 64130: 24274, 64131: 24281, 64132: 24425, 64133: 24493, 64134: 24792, 64135: 24910, 64136: 24840, 64137: 24974, 64138: 24928, 64139: 25074, 64140: 25140, 64141: 25540, 64142: 25628, 64143: 25682, 64144: 25942, 64145: 26228, 64146: 26391, 64147: 26395, 64148: 26454, 64149: 27513, 64150: 27578, 64151: 27969, 64152: 28379, 64153: 28363, 64154: 28450, 64155: 28702, 64156: 29038, 64157: 30631, 64158: 29237, 64159: 29359, 64160: 29482, 64161: 29809, 64162: 29958, 64163: 30011, 64164: 30237, 64165: 30239, 64166: 30410, 64167: 30427, 64168: 30452, 64169: 30538, 64170: 30528, 64171: 30924, 64172: 31409, 64173: 31680, 64174: 31867, 64175: 32091, 64176: 32244, 64177: 32574, 64178: 32773, 64179: 33618, 64180: 33775, 64181: 34681, 64182: 35137, 64183: 35206, 64184: 35222, 64185: 35519, 64186: 35576, 64187: 35531, 64188: 35585, 64189: 35582, 64190: 35565, 64191: 35641, 64192: 35722, 64193: 36104, 64194: 36664, 64195: 36978, 64196: 37273, 64197: 37494, 64198: 38524, 64199: 38627, 64200: 38742, 64201: 38875, 64202: 38911, 64203: 38923, 64204: 38971, 64205: 39698, 64206: 40860, 64207: 141386, 64208: 141380, 64209: 144341, 64210: 15261, 64211: 16408, 64212: 16441, 64213: 152137, 64214: 154832, 64215: 163539, 64216: 40771, 64217: 40846, 194560: 20029, 194561: 20024, 194562: 20033, 194563: 131362, 194564: 20320, 194565: 20398, 194566: 20411, 194567: 20341, 194568: 20602, 194569: 20633, 194570: 20711, 194571: 20687, 194572: 13470, 194573: 132666, 194574: 20813, 194575: 20820, 194576: 20836, 194577: 20855, 194578: 132380, 194579: 13497, 194580: 20839, 194581: 20877, 194582: 132427, 194583: 20887, 194584: 20900, 194585: 20172, 194586: 20908, 194587: 20917, 194588: 168415, 194589: 20981, 194590: 20995, 194591: 13535, 194592: 21051, 194593: 21062, 194594: 21106, 194595: 21111, 194596: 13589, 194597: 21191, 194598: 21193, 194599: 21220, 194600: 21242, 194601: 21253, 194602: 21254, 194603: 21271, 194604: 21321, 194605: 21329, 194606: 21338, 194607: 21363, 194608: 21373, 194609: 21375, 194610: 21375, 194611: 21375, 194612: 133676, 194613: 28784, 194614: 21450, 194615: 21471, 194616: 133987, 194617: 21483, 194618: 21489, 194619: 21510, 194620: 21662, 194621: 21560, 194622: 21576, 194623: 21608, 194624: 21666, 194625: 21750, 194626: 21776, 194627: 21843, 194628: 21859, 194629: 21892, 194630: 21892, 194631: 21913, 194632: 21931, 194633: 21939, 194634: 21954, 194635: 22294, 194636: 22022, 194637: 22295, 194638: 22097, 194639: 22132, 194640: 20999, 194641: 22766, 194642: 22478, 194643: 22516, 194644: 22541, 194645: 22411, 194646: 22578, 194647: 22577, 194648: 22700, 194649: 136420, 194650: 22770, 194651: 22775, 194652: 22790, 194653: 22810, 194654: 22818, 194655: 22882, 194656: 136872, 194657: 136938, 194658: 23020, 194659: 23067, 194660: 23079, 194661: 23000, 194662: 23142, 194663: 14062, 194664: 14076, 194665: 23304, 194666: 23358, 194667: 23358, 194668: 137672, 194669: 23491, 194670: 23512, 194671: 23527, 194672: 23539, 194673: 138008, 194674: 23551, 194675: 23558, 194676: 24403, 194677: 23586, 194678: 14209, 194679: 23648, 194680: 23662, 194681: 23744, 194682: 23693, 194683: 138724, 194684: 23875, 194685: 138726, 194686: 23918, 194687: 23915, 194688: 23932, 194689: 24033, 194690: 24034, 194691: 14383, 194692: 24061, 194693: 24104, 194694: 24125, 194695: 24169, 194696: 14434, 194697: 139651, 194698: 14460, 194699: 24240, 194700: 24243, 194701: 24246, 194702: 24266, 194703: 172946, 194704: 24318, 194705: 140081, 194706: 140081, 194707: 33281, 194708: 24354, 194709: 24354, 194710: 14535, 194711: 144056, 194712: 156122, 194713: 24418, 194714: 24427, 194715: 14563, 194716: 24474, 194717: 24525, 194718: 24535, 194719: 24569, 194720: 24705, 194721: 14650, 194722: 14620, 194723: 24724, 194724: 141012, 194725: 24775, 194726: 24904, 194727: 24908, 194728: 24910, 194729: 24908, 194730: 24954, 194731: 24974, 194732: 25010, 194733: 24996, 194734: 25007, 194735: 25054, 194736: 25074, 194737: 25078, 194738: 25104, 194739: 25115, 194740: 25181, 194741: 25265, 194742: 25300, 194743: 25424, 194744: 142092, 194745: 25405, 194746: 25340, 194747: 25448, 194748: 25475, 194749: 25572, 194750: 142321, 194751: 25634, 194752: 25541, 194753: 25513, 194754: 14894, 194755: 25705, 194756: 25726, 194757: 25757, 194758: 25719, 194759: 14956, 194760: 25935, 194761: 25964, 194762: 143370, 194763: 26083, 194764: 26360, 194765: 26185, 194766: 15129, 194767: 26257, 194768: 15112, 194769: 15076, 194770: 20882, 194771: 20885, 194772: 26368, 194773: 26268, 194774: 32941, 194775: 17369, 194776: 26391, 194777: 26395, 194778: 26401, 194779: 26462, 194780: 26451, 194781: 144323, 194782: 15177, 194783: 26618, 194784: 26501, 194785: 26706, 194786: 26757, 194787: 144493, 194788: 26766, 194789: 26655, 194790: 26900, 194791: 15261, 194792: 26946, 194793: 27043, 194794: 27114, 194795: 27304, 194796: 145059, 194797: 27355, 194798: 15384, 194799: 27425, 194800: 145575, 194801: 27476, 194802: 15438, 194803: 27506, 194804: 27551, 194805: 27578, 194806: 27579, 194807: 146061, 194808: 138507, 194809: 146170, 194810: 27726, 194811: 146620, 194812: 27839, 194813: 27853, 194814: 27751, 194815: 27926, 194816: 27966, 194817: 28023, 194818: 27969, 194819: 28009, 194820: 28024, 194821: 28037, 194822: 146718, 194823: 27956, 194824: 28207, 194825: 28270, 194826: 15667, 194827: 28363, 194828: 28359, 194829: 147153, 194830: 28153, 194831: 28526, 194832: 147294, 194833: 147342, 194834: 28614, 194835: 28729, 194836: 28702, 194837: 28699, 194838: 15766, 194839: 28746, 194840: 28797, 194841: 28791, 194842: 28845, 194843: 132389, 194844: 28997, 194845: 148067, 194846: 29084, 194847: 148395, 194848: 29224, 194849: 29237, 194850: 29264, 194851: 149000, 194852: 29312, 194853: 29333, 194854: 149301, 194855: 149524, 194856: 29562, 194857: 29579, 194858: 16044, 194859: 29605, 194860: 16056, 194861: 16056, 194862: 29767, 194863: 29788, 194864: 29809, 194865: 29829, 194866: 29898, 194867: 16155, 194868: 29988, 194869: 150582, 194870: 30014, 194871: 150674, 194872: 30064, 194873: 139679, 194874: 30224, 194875: 151457, 194876: 151480, 194877: 151620, 194878: 16380, 194879: 16392, 194880: 30452, 194881: 151795, 194882: 151794, 194883: 151833, 194884: 151859, 194885: 30494, 194886: 30495, 194887: 30495, 194888: 30538, 194889: 16441, 194890: 30603, 194891: 16454, 194892: 16534, 194893: 152605, 194894: 30798, 194895: 30860, 194896: 30924, 194897: 16611, 194898: 153126, 194899: 31062, 194900: 153242, 194901: 153285, 194902: 31119, 194903: 31211, 194904: 16687, 194905: 31296, 194906: 31306, 194907: 31311, 194908: 153980, 194909: 154279, 194910: 154279, 194911: 31470, 194912: 16898, 194913: 154539, 194914: 31686, 194915: 31689, 194916: 16935, 194917: 154752, 194918: 31954, 194919: 17056, 194920: 31976, 194921: 31971, 194922: 32000, 194923: 155526, 194924: 32099, 194925: 17153, 194926: 32199, 194927: 32258, 194928: 32325, 194929: 17204, 194930: 156200, 194931: 156231, 194932: 17241, 194933: 156377, 194934: 32634, 194935: 156478, 194936: 32661, 194937: 32762, 194938: 32773, 194939: 156890, 194940: 156963, 194941: 32864, 194942: 157096, 194943: 32880, 194944: 144223, 194945: 17365, 194946: 32946, 194947: 33027, 194948: 17419, 194949: 33086, 194950: 23221, 194951: 157607, 194952: 157621, 194953: 144275, 194954: 144284, 194955: 33281, 194956: 33284, 194957: 36766, 194958: 17515, 194959: 33425, 194960: 33419, 194961: 33437, 194962: 21171, 194963: 33457, 194964: 33459, 194965: 33469, 194966: 33510, 194967: 158524, 194968: 33509, 194969: 33565, 194970: 33635, 194971: 33709, 194972: 33571, 194973: 33725, 194974: 33767, 194975: 33879, 194976: 33619, 194977: 33738, 194978: 33740, 194979: 33756, 194980: 158774, 194981: 159083, 194982: 158933, 194983: 17707, 194984: 34033, 194985: 34035, 194986: 34070, 194987: 160714, 194988: 34148, 194989: 159532, 194990: 17757, 194991: 17761, 194992: 159665, 194993: 159954, 194994: 17771, 194995: 34384, 194996: 34396, 194997: 34407, 194998: 34409, 194999: 34473, 195000: 34440, 195001: 34574, 195002: 34530, 195003: 34681, 195004: 34600, 195005: 34667, 195006: 34694, 195007: 17879, 195008: 34785, 195009: 34817, 195010: 17913, 195011: 34912, 195012: 34915, 195013: 161383, 195014: 35031, 195015: 35038, 195016: 17973, 195017: 35066, 195018: 13499, 195019: 161966, 195020: 162150, 195021: 18110, 195022: 18119, 195023: 35488, 195024: 35565, 195025: 35722, 195026: 35925, 195027: 162984, 195028: 36011, 195029: 36033, 195030: 36123, 195031: 36215, 195032: 163631, 195033: 133124, 195034: 36299, 195035: 36284, 195036: 36336, 195037: 133342, 195038: 36564, 195039: 36664, 195040: 165330, 195041: 165357, 195042: 37012, 195043: 37105, 195044: 37137, 195045: 165678, 195046: 37147, 195047: 37432, 195048: 37591, 195049: 37592, 195050: 37500, 195051: 37881, 195052: 37909, 195053: 166906, 195054: 38283, 195055: 18837, 195056: 38327, 195057: 167287, 195058: 18918, 195059: 38595, 195060: 23986, 195061: 38691, 195062: 168261, 195063: 168474, 195064: 19054, 195065: 19062, 195066: 38880, 195067: 168970, 195068: 19122, 195069: 169110, 195070: 38923, 195071: 38923, 195072: 38953, 195073: 169398, 195074: 39138, 195075: 19251, 195076: 39209, 195077: 39335, 195078: 39362, 195079: 39422, 195080: 19406, 195081: 170800, 195082: 39698, 195083: 40000, 195084: 40189, 195085: 19662, 195086: 19693, 195087: 40295, 195088: 172238, 195089: 19704, 195090: 172293, 195091: 172558, 195092: 172689, 195093: 40635, 195094: 19798, 195095: 40697, 195096: 40702, 195097: 40709, 195098: 40719, 195099: 40726, 195100: 40763, 195101: 173568 };
  /**
   * 同形汉字替换
   * @param {string} s
   * @returns {string} */
  strings.confusableHanConvert = s => {
    const normalized = s.replace(/./ug, c => {
      if (!Object.prototype.hasOwnProperty.call(confusableHanTable, c.charCodeAt())) return c;
      return String.fromCodePoint(confusableHanTable[c.codePointAt()]);
    });
    if (normalized === s) return s;
    if (util.debug) {
      util.debug('Confusable Han Convert: %s -> %s\n%o', s, normalized,
        [...normalized].map((c, i) => [c, [...s][i]]).filter(([a, b]) => a !== b));
    }
    return normalized;
  };

  /**
   * @param {Node} element
   */
  strings.normalizeConfusableHanNode = function normalizeNode(element) {
    if (element instanceof HTMLElement) {
      // 不处理用户提到
      if (element.matches('a[usercard*="name"]')) return;
      [...element.childNodes].forEach(normalizeNode);
      ['title'].forEach(attr => {
        normalizeNode(element.attributes.getNamedItem(attr));
      });
      // 特别处理一下话题链接
      if (element.matches('.a_topic') && element.href.startsWith('https://s.weibo.com/weibo')) {
        const href = new URL(element.href);
        href.searchParams.set('q', strings.confusableHanConvert(href.searchParams.get('q')));
        element.href = href;
      }
    } else if (element instanceof Text || element instanceof Attr) {
      element.nodeValue = strings.confusableHanConvert(element.nodeValue);
    }
  };

}());
